<html>
<head>
    <title>Mean Maps App</title>
    <script src="javascripts/angular.min.js"></script>
    <script src="javascripts/angular-ui-router.js"></script>
    <script src="http://angular-ui.github.io/ui-leaflet/bower_components/leaflet/dist/leaflet.js"></script>
    <script src="http://angular-ui.github.io/ui-leaflet/bower_components/angular-simple-logger/dist/angular-simple-logger.js"></script>
    <script src="http://angular-ui.github.io/ui-leaflet/dist/ui-leaflet.min.js"></script>
    <script src="javascripts/angularApp.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.3.min.js"></script>
    <link rel="stylesheet" href="http://angular-ui.github.io/ui-leaflet/bower_components/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="stylesheets/style.css">
</head>
<body>
<h1>HSL:n myyntipisteet</h1>
<div id="map"></div>

<script>
    var layer= L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    });
    var map = L.map('map', {
        center: new L.LatLng(60.192, 24.94),
        zoom: 12
    });
    layer.addTo(map);
    var maplayer = new L.geoJson();
    maplayer.addTo(map);
    $.ajax({
        dataType: "json",
        url: "/maplayer.geojson",
        success: function(data) {
            $(data.features).each(function(key, feature) {
                maplayer.addData(feature);
            })
            maplayer.eachLayer(function(layer) {
                var popup = [];
                for (var prop in layer.feature.properties) {
                    popup.push(prop + ": " + layer.feature.properties[prop]);
                }
                maplayer.bindPopup(popup.join("<br />"));
            });
            map.fitBounds(maplayer.getBounds());
        }
    }).error(function() {});
</script>
</body>
</html>